<!-- Navegação contextual por módulos -->
{% macro render_module_nav(current_module, current_page=None) %}
<div class="module-nav-container mb-4">
    {% if current_module == 'piscina' %}
        <!-- Navegação do Módulo Piscina -->
        <div class="card border-info">
            <div class="card-header bg-info text-white">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-swimming-pool me-2"></i>
                        <strong>Módulo: Controle de Piscina</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('main.index') }}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home"></i> Voltar ao Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'moradores' else '' }}" 
                       href="{{ url_for('main.listar_moradores') }}">
                        <i class="fas fa-users me-1"></i>
                        <span class="d-none d-md-inline">Moradores</span>
                        <span class="d-md-none">Moradores</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'carteirinhas' else '' }}" 
                       href="{{ url_for('main.gerar_carteirinhas_lote') }}">
                        <i class="fas fa-id-card me-1"></i>
                        <span class="d-none d-md-inline">Carteirinhas</span>
                        <span class="d-md-none">Cards</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'scanner' else '' }}" 
                       href="{{ url_for('main.acesso_qrcode') }}">
                        <i class="fas fa-qrcode me-1"></i>
                        <span class="d-none d-md-inline">Scanner QR</span>
                        <span class="d-md-none">QR</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'controle' else '' }}" 
                       href="{{ url_for('main.controle_acesso') }}">
                        <i class="fas fa-eye me-1"></i>
                        <span class="d-none d-md-inline">Controle de Acesso</span>
                        <span class="d-md-none">Acesso</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'salva_vidas' else '' }}" 
                       href="{{ url_for('main.listar_salva_vidas') }}">
                        <i class="fas fa-life-ring me-1"></i>
                        <span class="d-none d-md-inline">Salva-vidas</span>
                        <span class="d-md-none">Salva-vidas</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'historico' else '' }}" 
                       href="{{ url_for('main.historico_acesso') }}">
                        <i class="fas fa-history me-1"></i>
                        <span class="d-none d-md-inline">Histórico</span>
                        <span class="d-md-none">Histórico</span>
                    </a>
                </nav>
            </div>
        </div>

    {% elif current_module == 'manutencao' %}
        <!-- Navegação do Módulo Manutenção -->
        <div class="card border-success">
            <div class="card-header bg-success text-white">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-tools me-2"></i>
                        <strong>Módulo: Manutenção & Chamados</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('main.index') }}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home"></i> Voltar ao Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'dashboard' else '' }}" 
                       href="{{ url_for('manutencao.dashboard') }}">
                        <i class="fas fa-chart-bar me-1"></i>
                        <span class="d-none d-md-inline">Dashboard</span>
                        <span class="d-md-none">Dashboard</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'chamados' else '' }}" 
                       href="{{ url_for('manutencao.listar_chamados') }}">
                        <i class="fas fa-list me-1"></i>
                        <span class="d-none d-md-inline">Listar Chamados</span>
                        <span class="d-md-none">Lista</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'novo' else '' }}" 
                       href="{{ url_for('manutencao.novo_chamado') }}">
                        <i class="fas fa-plus me-1"></i>
                        <span class="d-none d-md-inline">Novo Chamado</span>
                        <span class="d-md-none">Novo</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'categorias' else '' }}" 
                       href="{{ url_for('manutencao.categorias') }}">
                        <i class="fas fa-tags me-1"></i>
                        <span class="d-none d-md-inline">Categorias</span>
                        <span class="d-md-none">Categorias</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'relatorios' else '' }}" 
                       href="{{ url_for('manutencao.relatorios') }}">
                        <i class="fas fa-chart-line me-1"></i>
                        <span class="d-none d-md-inline">Relatórios</span>
                        <span class="d-md-none">Relatórios</span>
                    </a>
                </nav>
            </div>
        </div>

    {% elif current_module == 'admin' %}
        <!-- Navegação do Módulo Admin -->
        <div class="card border-danger">
            <div class="card-header bg-danger text-white">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-crown me-2"></i>
                        <strong>Módulo: Administração do Sistema</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('main.index') }}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home"></i> Voltar ao Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'dashboard' else '' }}" 
                       href="{{ url_for('admin.dashboard') }}">
                        <i class="fas fa-tachometer-alt me-1"></i>
                        <span class="d-none d-md-inline">Dashboard Admin</span>
                        <span class="d-md-none">Dashboard</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'condominios' else '' }}" 
                       href="{{ url_for('admin.listar_tenants') }}">
                        <i class="fas fa-building me-1"></i>
                        <span class="d-none d-md-inline">Condomínios</span>
                        <span class="d-md-none">Condos</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'modulos' else '' }}" 
                       href="{{ url_for('admin.listar_modulos') }}">
                        <i class="fas fa-th-large me-1"></i>
                        <span class="d-none d-md-inline">Módulos</span>
                        <span class="d-md-none">Módulos</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'sistema' else '' }}" 
                       href="{{ url_for('admin.system_info') }}">
                        <i class="fas fa-info-circle me-1"></i>
                        <span class="d-none d-md-inline">Info Sistema</span>
                        <span class="d-md-none">Sistema</span>
                    </a>
                </nav>
            </div>
        </div>

    {% elif current_module == 'usuarios' %}
        <!-- Navegação do Módulo Usuários -->
        <div class="card border-warning">
            <div class="card-header bg-warning text-dark">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-users-cog me-2"></i>
                        <strong>Módulo: Gestão de Usuários</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('main.index') }}" class="btn btn-outline-dark btn-sm">
                            <i class="fas fa-home"></i> Voltar ao Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'listar' else '' }}" 
                       href="{{ url_for('auth.listar_usuarios') }}">
                        <i class="fas fa-list me-1"></i>
                        <span class="d-none d-md-inline">Listar Usuários</span>
                        <span class="d-md-none">Lista</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'novo' else '' }}" 
                       href="{{ url_for('auth.cadastrar_usuario') }}">
                        <i class="fas fa-user-plus me-1"></i>
                        <span class="d-none d-md-inline">Novo Usuário</span>
                        <span class="d-md-none">Novo</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'permissoes' else '' }}" 
                       href="{{ url_for('auth.gerenciar_permissoes') }}">
                        <i class="fas fa-shield-alt me-1"></i>
                        <span class="d-none d-md-inline">Permissões</span>
                        <span class="d-md-none">Permissões</span>
                    </a>
                </nav>
            </div>
        </div>

    {% elif current_module == 'configuracoes' %}
        <!-- Navegação do Módulo Configurações -->
        <div class="card border-secondary">
            <div class="card-header bg-secondary text-white">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-cog me-2"></i>
                        <strong>Módulo: Configurações do Sistema</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('main.index') }}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home"></i> Voltar ao Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'condominio' else '' }}" 
                       href="{{ url_for('main.configuracoes') }}">
                        <i class="fas fa-building me-1"></i>
                        <span class="d-none d-md-inline">Condomínio</span>
                        <span class="d-md-none">Condo</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'email' else '' }}" 
                       href="{{ url_for('main.configuracoes_email') }}">
                        <i class="fas fa-envelope me-1"></i>
                        <span class="d-none d-md-inline">Email</span>
                        <span class="d-md-none">Email</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'sistema' else '' }}" 
                       href="{{ url_for('main.configuracoes_geral') }}">
                        <i class="fas fa-sliders-h me-1"></i>
                        <span class="d-none d-md-inline">Sistema</span>
                        <span class="d-md-none">Sistema</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'relatorios' else '' }}" 
                       href="{{ url_for('main.relatorios') }}">
                        <i class="fas fa-chart-bar me-1"></i>
                        <span class="d-none d-md-inline">Relatórios</span>
                        <span class="d-md-none">Relatórios</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'logs' else '' }}" 
                       href="{{ url_for('main.ver_logs') }}">
                        <i class="fas fa-file-alt me-1"></i>
                        <span class="d-none d-md-inline">Logs</span>
                        <span class="d-md-none">Logs</span>
                    </a>
                </nav>
            </div>
        </div>

    {% elif current_module == 'salva_vidas' %}
        <!-- Navegação específica para salva-vidas -->
        <div class="card border-primary">
            <div class="card-header bg-primary text-white">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-life-ring me-2"></i>
                        <strong>Módulo: Salva-vidas</strong>
                    </div>
                    <div>
                        <a href="{{ url_for('auth.salva_vidas_dashboard') }}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <nav class="nav nav-pills nav-fill">
                    <a class="nav-link {{ 'active' if current_page == 'dashboard' else '' }}" 
                       href="{{ url_for('auth.salva_vidas_dashboard') }}">
                        <i class="fas fa-tachometer-alt me-1"></i>
                        <span class="d-none d-md-inline">Dashboard</span>
                        <span class="d-md-none">Dashboard</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'scanner' else '' }}" 
                       href="{{ url_for('main.acesso_qrcode') }}">
                        <i class="fas fa-qrcode me-1"></i>
                        <span class="d-none d-md-inline">Scanner QR</span>
                        <span class="d-md-none">QR</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'registrar' else '' }}" 
                       href="{{ url_for('main.registrar_acesso') }}">
                        <i class="fas fa-clipboard me-1"></i>
                        <span class="d-none d-md-inline">Registrar Acesso</span>
                        <span class="d-md-none">Registrar</span>
                    </a>
                    <a class="nav-link {{ 'active' if current_page == 'controle' else '' }}" 
                       href="{{ url_for('main.controle_acesso') }}">
                        <i class="fas fa-eye me-1"></i>
                        <span class="d-none d-md-inline">Na Piscina</span>
                        <span class="d-md-none">Na Piscina</span>
                    </a>
                </nav>
            </div>
        </div>
    {% endif %}
</div>
{% endmacro %}

<!-- Breadcrumb contextual -->
{% macro render_breadcrumb(current_module, current_page, page_title=None) %}
<nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ url_for('main.index') }}">
                <i class="fas fa-home"></i> Dashboard
            </a>
        </li>
        {% if current_module %}
            <li class="breadcrumb-item">
                {% if current_module == 'piscina' %}
                    <i class="fas fa-swimming-pool text-info"></i> Piscina
                {% elif current_module == 'manutencao' %}
                    <i class="fas fa-tools text-success"></i> Manutenção
                {% elif current_module == 'admin' %}
                    <i class="fas fa-crown text-danger"></i> Admin
                {% elif current_module == 'usuarios' %}
                    <i class="fas fa-users-cog text-warning"></i> Usuários
                {% elif current_module == 'configuracoes' %}
                    <i class="fas fa-cog text-secondary"></i> Configurações
                {% elif current_module == 'salva_vidas' %}
                    <i class="fas fa-life-ring text-primary"></i> Salva-vidas
                {% endif %}
            </li>
        {% endif %}
        {% if page_title %}
            <li class="breadcrumb-item active" aria-current="page">
                {{ page_title }}
            </li>
        {% endif %}
    </ol>
</nav>
{% endmacro %}
