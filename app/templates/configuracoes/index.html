{% extends "base.html" %}
{% from 'navigation/module_nav.html' import render_module_nav, render_breadcrumb %}

{% block content %}
<!-- Navega√ß√£o contextual do m√≥dulo -->
{{ render_module_nav('configuracoes', 'sistema') }}
{{ render_breadcrumb('configuracoes', 'sistema', 'Configura√ß√µes do Sistema') }}

<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>
                <i class="fas fa-cogs me-2"></i>
                Configura√ß√µes do Sistema
            </h1>
        </div>
    </div>
</div>

<!-- Cards de Configura√ß√µes -->
<div class="row">
    <!-- Email -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="fas fa-envelope fa-3x text-primary mb-3"></i>
                <h5 class="card-title">Configura√ß√µes de Email</h5>
                <p class="card-text">Configure servidor SMTP, credenciais e remetente padr√£o para notifica√ß√µes autom√°ticas.</p>
                <a href="{{ url_for('main.configuracoes_email') }}" class="btn btn-primary">
                    <i class="fas fa-cog me-1"></i>
                    Configurar Email
                </a>
            </div>
        </div>
    </div>

    <!-- Condom√≠nio -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="fas fa-building fa-3x text-success mb-3"></i>
                <h5 class="card-title">Dados do Condom√≠nio</h5>
                <p class="card-text">Configure informa√ß√µes, contatos, personaliza√ß√£o visual e regras espec√≠ficas do condom√≠nio.</p>
                <a href="{{ url_for('main.configuracoes_condominio') }}" class="btn btn-success">
                    <i class="fas fa-edit me-1"></i>
                    Configurar Condom√≠nio
                </a>
            </div>
        </div>
    </div>

    <!-- Sistema -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="fas fa-server fa-3x text-info mb-3"></i>
                <h5 class="card-title">Configura√ß√µes Gerais</h5>
                <p class="card-text">Defina configura√ß√µes de seguran√ßa, backup, notifica√ß√µes e outras op√ß√µes do sistema.</p>
                <a href="{{ url_for('main.configuracoes_geral') }}" class="btn btn-info">
                    <i class="fas fa-sliders-h me-1"></i>
                    Configurar Sistema
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Status do Sistema -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    Status do Sistema
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="text-center">
                            {% if total_moradores >= 0 %}
                                <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                                <h6>Sistema</h6>
                                <span class="badge bg-success">Online</span>
                            {% else %}
                                <i class="fas fa-exclamation-triangle fa-2x text-warning mb-2"></i>
                                <h6>Sistema</h6>
                                <span class="badge bg-warning">Erro</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            {% if banco_conectado %}
                                <i class="fas fa-database fa-2x text-success mb-2"></i>
                                <h6>Banco de Dados</h6>
                                <span class="badge bg-success">Conectado</span>
                            {% else %}
                                <i class="fas fa-database fa-2x text-danger mb-2"></i>
                                <h6>Banco de Dados</h6>
                                <span class="badge bg-danger">Erro</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            {% if email_configurado %}
                                <i class="fas fa-envelope fa-2x text-success mb-2"></i>
                                <h6>Email SMTP</h6>
                                <span class="badge bg-success">Configurado</span>
                            {% else %}
                                <i class="fas fa-envelope fa-2x text-warning mb-2"></i>
                                <h6>Email SMTP</h6>
                                <span class="badge bg-warning">Configurar</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            {% if seguranca_ativa %}
                                <i class="fas fa-shield-alt fa-2x text-success mb-2"></i>
                                <h6>Seguran√ßa</h6>
                                <span class="badge bg-success">Ativo</span>
                            {% else %}
                                <i class="fas fa-shield-alt fa-2x text-warning mb-2"></i>
                                <h6>Seguran√ßa</h6>
                                <span class="badge bg-warning">Configurar</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Informa√ß√µes T√©cnicas -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-code me-2"></i>
                    Informa√ß√µes T√©cnicas
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-sm">
                            <tr>
                                <td><strong>Vers√£o do Sistema:</strong></td>
                                <td>1.0.0 - Produto Comercial</td>
                            </tr>
                            <tr>
                                <td><strong>Banco de Dados:</strong></td>
                                <td>SQLite ({{ modo_sistema }})</td>
                            </tr>
                            <tr>
                                <td><strong>Total de Moradores:</strong></td>
                                <td>{{ total_moradores }}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-sm">
                            <tr>
                                <td><strong>Data de Instala√ß√£o:</strong></td>
                                <td>{{ data_atual }}</td>
                            </tr>
                            <tr>
                                <td><strong>Backup Autom√°tico:</strong></td>
                                <td>
                                    {% if backup_automatico %}
                                        <span class="text-success">‚úÖ Ativo</span>
                                    {% else %}
                                        <span class="text-warning">‚ö†Ô∏è Desativado</span>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Modo:</strong></td>
                                <td>
                                    {% if modo_sistema == 'Desenvolvimento' %}
                                        <span class="text-info">üîß {{ modo_sistema }}</span>
                                    {% else %}
                                        <span class="text-success">üöÄ {{ modo_sistema }}</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- A√ß√µes R√°pidas -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-bolt me-2"></i>
                    A√ß√µes R√°pidas
                </h5>
            </div>
            <div class="card-body">
                <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group me-2" role="group">
                        <a href="{{ url_for('main.teste_email_configurado') }}" class="btn btn-outline-primary">
                            <i class="fas fa-paper-plane me-1"></i>
                            Testar Email
                        </a>
                    </div>
                    <div class="btn-group me-2" role="group">
                        <button type="button" class="btn btn-outline-success" onclick="window.location.reload()">
                            <i class="fas fa-sync-alt me-1"></i>
                            Recarregar Sistema
                        </button>
                    </div>
                    <div class="btn-group" role="group">
                        <a href="{{ url_for('main.relatorios') }}" class="btn btn-outline-info">
                            <i class="fas fa-chart-line me-1"></i>
                            Ver Relat√≥rios
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 